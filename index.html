<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Manual do Aprovado - Diagn√≥stico Interativo</title>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
</head>
<body>
  <div class="background"></div>
  <header>
    <div class="header-glass">
      <span class="avatar">üìò</span>
      <h1>Manual do Aprovado</h1>
      <span class="subtitle">Diagn√≥stico Interativo</span>
    </div>
  </header>
  <main>
    <div class="card-glass" id="quiz-card">
      <!-- Fluxo renderizado aqui -->
    </div>
    <div id="progress-bar-container">
      <div id="progress-bar"></div>
    </div>
  </main>
  <footer>
    <span>¬© 2025 Manual do Aprovado</span>
    <a href="https://instagram.com/pg_concursos_" target="_blank">@pg_concursos_</a>
  </footer>
  <script>
    // ================= FLUXO L√ìGICO ======================
    const steps = [
      // STEP 0: Nome
      {
        id: 0,
        question: "Antes de come√ßar: qual seu nome?",
        type: "input",
        inputPlaceholder: "Digite seu nome aqui",
        next: 1,
      },
      // STEP 1: PROBLEMA CENTRAL
      {
        id: 1,
        question: (state) => `Ol√°, ${state.nome || "concurseiro(a)"}! Voc√™ sente que estuda muito, mas n√£o v√™ evolu√ß√£o real nos seus resultados?`,
        options: [
          { text: "Sim, sinto isso", next: 2 },
          { text: "N√£o, estou progredindo", next: 10 },
        ],
      },
      // STEP 2: Tentou mudar m√©todo?
      {
        id: 2,
        question: "Voc√™ j√° tentou mudar o m√©todo de estudo pra resolver esse problema?",
        options: [
          { text: "J√° tentei, mas n√£o adiantou", next: 3 },
          { text: "Nunca tentei, sigo estudando do meu jeito", next: 3 },
        ],
      },
      // STEP 3: Planejamento
      {
        id: 3,
        question: "Hoje voc√™ segue um planejamento claro de estudos? (ex: ciclo, rotina fixa, metas semanais)",
        options: [
          { text: "Tenho um plano estruturado", next: 4 },
          { text: "Fa√ßo mais ou menos, sem rotina definida", next: 4 },
          { text: "N√£o, estudo totalmente solto", next: 4 },
        ],
      },
      // STEP 4: Revis√£o
      {
        id: 4,
        question: "Voc√™ tem um m√©todo de revis√£o que funciona de verdade? (Ou sente que esquece muito r√°pido?)",
        options: [
          { text: "Sim, reviso bem", next: 5 },
          { text: "Fa√ßo revis√£o, mas sinto que esque√ßo r√°pido", next: 5 },
          { text: "N√£o reviso quase nada", next: 5 },
        ],
      },
      // STEP 5: Quest√µes
      {
        id: 5,
        question: "Resolver quest√µes faz parte do seu dia a dia?",
        options: [
          { text: "Sim, todo dia", next: 6 },
          { text: "S√≥ quando sobra tempo", next: 6 },
          { text: "Raramente", next: 6 },
        ],
      },
      // STEP 6: Material
      {
        id: 6,
        question: "Voc√™ sente seguran√ßa ao escolher materiais de estudo? (PDF, videoaula, site de quest√µes etc)",
        options: [
          { text: "Sim, sei escolher", next: 7 },
          { text: "N√£o, sempre fico na d√∫vida", next: 7 },
        ],
      },
      // STEP 7: √Årea de foco
      {
        id: 7,
        question: "Voc√™ j√° escolheu a √°rea/cargo que quer? Ou ainda est√° testando tudo?",
        options: [
          { text: "J√° sei meu foco", next: 8 },
          { text: "Ainda n√£o, estou perdido(a)", next: 8 },
        ],
      },
      // STEP 8: Diagn√≥stico personalizado
      {
        id: 8,
        question: (state) => {
          let problemas = [];
          if (state[1] === 0) problemas.push("falta de evolu√ß√£o nos estudos");
          if (state[3] !== 0) problemas.push("aus√™ncia de planejamento estruturado");
          if (state[4] !== 0) problemas.push("revis√£o pouco eficaz ou inexistente");
          if (state[5] !== 0) problemas.push("baixa pr√°tica com quest√µes");
          if (state[6] !== 0) problemas.push("inseguran√ßa na escolha de materiais");
          if (state[7] !== 0) problemas.push("falta de clareza sobre o foco");
          const nome = state.nome || "Concurseiro(a)";
          return `
            <strong>${nome}, veja seu diagn√≥stico:</strong>
            <br><br>
            Voc√™ enfrenta:<br>
            <ul>
              ${problemas.map(p => `<li>‚Ä¢ ${p}</li>`).join('')}
            </ul>
            <br>
            <b>√â justamente para vencer essas barreiras que existe o Manual do Aprovado ‚Äî Vers√£o do Iniciante.</b>
            <br><br>
            Quer entender como o Manual pode resolver seu caso?
          `;
        },
        options: [
          { text: "Quero ver o m√©todo!", next: 9 },
          { text: "Voltar ao in√≠cio", next: 1 }
        ]
      },
      // STEP 9: Apresenta√ß√£o do Manual
      {
        id: 9,
        question: `
        <strong>Como o Manual do Aprovado vai te ajudar:</strong>
        <ul>
          <li>‚úîÔ∏è M√©todo validado, direto ao ponto</li>
          <li>‚úîÔ∏è Ciclo de estudos explicado com modelos pr√°ticos</li>
          <li>‚úîÔ∏è Estrat√©gia de revis√£o simples e eficiente</li>
          <li>‚úîÔ∏è Como usar quest√µes para consolidar o estudo</li>
          <li>‚úîÔ∏è Guia de materiais e √°reas de foco</li>
          <li>‚úîÔ∏è Tudo para evitar os erros que voc√™ acabou de relatar</li>
        </ul>
        <br>
        <b>B√¥nus:</b> Suporte personalizado, dicas exclusivas e atualiza√ß√£o para 2025.<br><br>
        <a href="https://wa.me/SEUNUMERO" class="cta-final" target="_blank">QUERO GARANTIR O MEU MANUAL!</a>
        `,
        options: [
          { text: "Voltar ao diagn√≥stico", next: 8 }
        ]
      },
      // STEP 10: Caso o usu√°rio j√° esteja progredindo bem
      {
        id: 10,
        question: "Voc√™ j√° foi aprovado em algum concurso? Ou est√° estudando para sua primeira prova?",
        options: [
          { text: "J√° fui aprovado", next: 11 },
          { text: "Ainda n√£o, mas estou confiante", next: 12 }
        ]
      },
      // STEP 11: Parabeniza√ß√£o (aprovados)
      {
        id: 11,
        question: (state) => `Parab√©ns, ${state.nome || "concurseiro(a)"}! J√° passou por onde muitos querem chegar. Se quiser aperfei√ßoar seu m√©todo, conhecer t√©cnicas avan√ßadas e acelerar novas aprova√ß√µes, conhe√ßa o Manual do Aprovado.<br><br><a href="https://wa.me/SEUNUMERO" class="cta-final" target="_blank">QUERO ACESSAR!</a>`,
        options: [
          { text: "Voltar ao in√≠cio", next: 1 }
        ]
      },
      // STEP 12: Incentivo para os confiantes
      {
        id: 12,
        question: (state) => `${state.nome || "Concurseiro(a)"}, manter a confian√ßa √© essencial! Se quiser garantir um m√©todo sem enrola√ß√£o e acelerar sua aprova√ß√£o, conte com o Manual do Aprovado ‚Äî feito por quem j√° trilhou esse caminho.<br><br><a href="https://wa.me/SEUNUMERO" class="cta-final" target="_blank">QUERO COME√áAR CERTO!</a>`,
        options: [
          { text: "Voltar ao in√≠cio", next: 1 }
        ]
      }
    ];

    // ================= STATE E RENDER =====================
    let state = { nome: "", step: 0 }; // Salva respostas
    let history = []; // Pilha para voltar

    function renderStep(stepId) {
      const container = document.getElementById("quiz-card");
      const step = steps.find(s => s.id === stepId);
      updateProgressBar(stepId);

      let avatar = `<div class="avatar-float"></div>`;
      let html = avatar;

      let question = typeof step.question === "function" ? step.question(state) : step.question;
      html += `<div class="pergunta">${question}</div>`;

      if (step.type === "input") {
        html += `<input type="text" id="input-nome" placeholder="${step.inputPlaceholder || ""}" autocomplete="off" maxlength="30"/>
          <button class="btn-quiz" id="btn-next" disabled>Avan√ßar</button>`;
        container.innerHTML = html;
        const input = document.getElementById("input-nome");
        const btn = document.getElementById("btn-next");
        input.addEventListener("input", () => {
          btn.disabled = input.value.trim().length < 2;
        });
        btn.addEventListener("click", () => {
          history.push(stepId);
          state.nome = input.value.trim();
          state[stepId] = input.value.trim();
          goTo(step.next);
        });
        return;
      }

      if (step.options) {
        html += `<div class="opcoes">`;
        step.options.forEach((op, idx) => {
          html += `<button class="btn-quiz" data-idx="${idx}">${op.text}</button>`;
        });
        html += `</div>`;
      }

      if (history.length > 0) {
        html += `<button class="btn-voltar" id="btn-voltar">‚Üê Voltar</button>`;
      }
      container.innerHTML = html;

      if (step.options) {
        container.querySelectorAll(".btn-quiz").forEach((btn, idx) => {
          btn.addEventListener("click", () => {
            history.push(stepId);
            state[stepId] = idx;
            goTo(step.options[idx].next);
          });
        });
      }
      const btnVoltar = document.getElementById("btn-voltar");
      if (btnVoltar) {
        btnVoltar.addEventListener("click", () => {
          if (history.length > 0) {
            let prev = history.pop();
            goTo(prev, true);
          }
        });
      }
    }

    function goTo(stepId, isBack = false) {
      state.step = stepId;
      const container = document.getElementById("quiz-card");
      container.classList.remove("show");
      setTimeout(() => {
        renderStep(stepId);
        container.classList.add("show");
      }, isBack ? 150 : 250);
    }

    function updateProgressBar(stepId) {
      const total = 9;
      const percent = Math.min((stepId / total) * 100, 100);
      document.getElementById("progress-bar").style.width = percent + "%";
    }

    window.onload = () => {
      renderStep(0);
      document.getElementById("quiz-card").classList.add("show");
    };
  </script>
</body>
</html>
